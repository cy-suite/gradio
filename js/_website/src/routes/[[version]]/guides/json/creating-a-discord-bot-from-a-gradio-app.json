{"guide": {"name": "creating-a-discord-bot-from-a-gradio-app", "category": "chatbots", "pretty_category": "Chatbots", "guide_index": 3, "absolute_index": 15, "pretty_name": "Creating A Discord Bot From A Gradio App", "content": "# \ud83d\ude80 Creating Discord Bots from Gradio Apps \ud83d\ude80\n\n\n\nWe're excited to announce that Gradio can now automatically create a discord bot from a deployed app! \ud83e\udd16 \n\nDiscord is a popular communication platform that allows users to chat and interact with each other in real-time. By turning your Gradio app into a Discord bot, you can bring cutting edge AI to your discord server and give your community a whole new way to interact.\n\n## \ud83d\udcbb How does it work? \ud83d\udcbb\n\nWith `gradio_client` version `0.3.0`, any gradio `ChatInterface` app on the internet can automatically be deployed as a discord bot via the `deploy_discord` method of the `Client` class.\n\nTechnically, any gradio app that exposes an api route that takes in a single string and outputs a single string can be deployed to discord. In this guide, we will focus on `gr.ChatInterface` as those apps naturally lend themselves to discord's chat functionality.\n\n## \ud83d\udee0\ufe0f Requirements \ud83d\udee0\ufe0f\n\nMake sure you have the latest `gradio_client` and `gradio` versions installed.\n\n```bash\npip install gradio_client>=0.3.0 gradio>=3.38.0\n```\n\nAlso, make sure you have a [Hugging Face account](https://huggingface.co/) and a [write access token](https://huggingface.co/docs/hub/security-tokens).\n\n\u26a0\ufe0f Tip \u26a0\ufe0f: Make sure you login to the Hugging Face Hub by running `huggingface-cli login`. This will let you skip passing your token in all subsequent commands in this guide.\n\n## \ud83c\udfc3\u200d\u2640\ufe0f Quickstart \ud83c\udfc3\u200d\u2640\ufe0f\n\n### Step 1: Implementing our chatbot\nLet's build a very simple Chatbot using `ChatInterface` that simply repeats the user message. Write the following code into an `app.py`\n\n```python\nimport gradio as gr\n\ndef slow_echo(message, history):\n    return message\n\ndemo = gr.ChatInterface(slow_echo).queue().launch()\n```\n\n### Step 2: Deploying our App\nIn order to create a discord bot for our app, it must be accessible over the internet. In this guide, we will use the `gradio deploy` command to deploy our chatbot to Hugging Face spaces from the command line. Run the following command.\n\n```bash\ngradio deploy --title echo-chatbot --app-file app.py\n```\n\nThis command will ask you some questions, e.g. requested hardware, requirements, but the default values will suffice for this guide.\nNote the URL of the space that was created. Mine is https://huggingface.co/spaces/freddyaboulton/echo-chatbot\n\n### Step 3: Creating a Discord Bot\nTurning our space into a discord bot is also a one-liner thanks to the `gradio deploy-discord`. Run the following command:\n\n```bash\ngradio deploy-discord --src freddyaboulton/echo-chatbot\n```\n\n\u2757\ufe0f Advanced \u2757\ufe0f: If you already have a discord bot token you can pass it to the `deploy-discord` command. Don't worry, if you don't have one yet!\n\n```bash\ngradio deploy-discord --src freddyaboulton/echo-chatbot --discord-bot-token <token>\n```\n\nNote the URL that gets printed out to the console. Mine is https://huggingface.co/spaces/freddyaboulton/echo-chatbot-gradio-discord-bot\n\n### Step 4: Getting a Discord Bot Token\nIf you didn't have a discord bot token for step 3, go to the URL that got printed in the console and follow the instructions there.\nOnce you obtain a token, run the command again but this time pass in the token: \n\n```bash\ngradio deploy-discord --src freddyaboulton/echo-chatbot --discord-bot-token <token>\n```\n\n### Step 5: Add the bot to your server\nVisit the space of your discord bot. You should see \"Add this bot to your server by clicking this link:\" followed by a URL. Go to that URL and add the bot to your server!\n\n### Step 6: Use your bot!\nBy default the bot can be called by starting a message with `/chat`, e.g. `/chat <your prompt here>`.\n\n\u26a0\ufe0f Tip \u26a0\ufe0f: If either of the deployed spaces goes to sleep, the bot will stop working. By default, spaces go to sleep after 48 hours of inactivity. You can upgrade the hardware of your space to prevent it from going to sleep. See this [guide](https://huggingface.co/docs/hub/spaces-gpus#using-gpu-spaces) for more information.\n\n<img src=\"https://gradio-builds.s3.amazonaws.com/demo-files/discordbots/guide/echo_slash.gif\">\n\n\n### Using the `gradio_client.Client` Class\nYou can also create a discord bot from a deployed gradio app with python.\n\n```python\nimport gradio_client as grc\ngrc.Client(\"freddyaboulton/echo-chatbot\").deploy_discord()\n```\n\n## \ud83e\uddbe Using State of The Art LLMs \ud83e\uddbe\n\nWe have created an organization on Hugging Face called [gradio-discord-bots](https://huggingface.co/gradio-discord-bots) containing several template spaces that explain how to deploy state of the art LLMs powered by gradio as discord bots.\n\nThe easiest way to get started is by deploying Meta's Llama 2 LLM with 70 billion parameter. Simply go to this [space](https://huggingface.co/spaces/gradio-discord-bots/Llama-2-70b-chat-hf) and follow the instructions. \n\nThe deployment can be done in one line! \ud83e\udd2f\n\n```python\nimport gradio_client as grc\ngrc.Client(\"ysharma/Explore_llamav2_with_TGI\").deploy_discord(to_id=\"llama2-70b-discord-bot\")\n```\n\n## \ud83e\udd9c Additional LLMs \ud83e\udd9c\n\nIn addion to Meta's 70 billion Llama 2 model, we have prepared template spaces for the following LLMs and deployment options:\n\n* [gpt-3.5-turbo](https://huggingface.co/spaces/gradio-discord-bots/gpt-35-turbo), powered by openai. Required OpenAI key.\n* [falcon-7b-instruct](https://huggingface.co/spaces/gradio-discord-bots/falcon-7b-instruct) powered by Hugging Face Inference Endpoints.\n* [Llama-2-13b-chat-hf](https://huggingface.co/spaces/gradio-discord-bots/Llama-2-13b-chat-hf) powered by Hugging Face Inference Endpoints.\n* [Llama-2-13b-chat-hf](https://huggingface.co/spaces/gradio-discord-bots/llama-2-13b-chat-transformers) powered by Hugging Face transformers.\n\nTo deploy any of these models to discord, simply follow the instructions in the linked space for that model.\n\n## Deploying non-chat gradio apps to discord\n\nAs mentioned above, you don't need a `gr.ChatInterface` if you want to deploy your gradio app to discord. All that's needed is an api route that takes in a single string and outputs a single string. \n\nThe following code will deploy a space that translates english to german as a discord bot.\n\n```python\nimport gradio_client as grc\nclient = grc.Client(\"freddyaboulton/english-to-german\")\nclient.deploy_discord(api_names=['german'])\n```\n\n## Conclusion\n\nThat's it for this guide! We're really excited about this feature. Tag [@Gradio](https://twitter.com/Gradio) on twitter and show us how your discord community interacts with your discord bots. ", "html": "<h1 id=\"creating-discord-bots-from-gradio-apps\">\ud83d\ude80 Creating Discord Bots from Gradio Apps \ud83d\ude80</h1>\n\n<p>We're excited to announce that Gradio can now automatically create a discord bot from a deployed app! \ud83e\udd16 </p>\n\n<p>Discord is a popular communication platform that allows users to chat and interact with each other in real-time. By turning your Gradio app into a Discord bot, you can bring cutting edge AI to your discord server and give your community a whole new way to interact.</p>\n\n<h2 id=\"how-does-it-work\">\ud83d\udcbb How does it work? \ud83d\udcbb</h2>\n\n<p>With <code>gradio_client</code> version <code>0.3.0</code>, any gradio <code>ChatInterface</code> app on the internet can automatically be deployed as a discord bot via the <code>deploy_discord</code> method of the <code>Client</code> class.</p>\n\n<p>Technically, any gradio app that exposes an api route that takes in a single string and outputs a single string can be deployed to discord. In this guide, we will focus on <code>gr.ChatInterface</code> as those apps naturally lend themselves to discord's chat functionality.</p>\n\n<h2 id=\"requirements\">\ud83d\udee0\ufe0f Requirements \ud83d\udee0\ufe0f</h2>\n\n<p>Make sure you have the latest <code>gradio_client</code> and <code>gradio</code> versions installed.</p>\n\n<div class='codeblock'><pre><code class='lang-bash'>pip install gradio_client>=0.3.0 gradio>=3.38.0\n</code></pre></div>\n\n<p>Also, make sure you have a <a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/\">Hugging Face account</a> and a <a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/docs/hub/security-tokens\">write access token</a>.</p>\n\n<p>\u26a0\ufe0f Tip \u26a0\ufe0f: Make sure you login to the Hugging Face Hub by running <code>huggingface-cli login</code>. This will let you skip passing your token in all subsequent commands in this guide.</p>\n\n<h2 id=\"quickstart\">\ud83c\udfc3\u200d\u2640\ufe0f Quickstart \ud83c\udfc3\u200d\u2640\ufe0f</h2>\n\n<h3 id=\"step-1-implementing-our-chatbot\">Step 1: Implementing our chatbot</h3>\n\n<p>Let's build a very simple Chatbot using <code>ChatInterface</code> that simply repeats the user message. Write the following code into an <code>app.py</code></p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio as gr\n\ndef slow_echo(message, history):\n    return message\n\ndemo = gr.ChatInterface(slow_echo).queue().launch()\n</code></pre></div>\n\n<h3 id=\"step-2-deploying-our-app\">Step 2: Deploying our App</h3>\n\n<p>In order to create a discord bot for our app, it must be accessible over the internet. In this guide, we will use the <code>gradio deploy</code> command to deploy our chatbot to Hugging Face spaces from the command line. Run the following command.</p>\n\n<div class='codeblock'><pre><code class='lang-bash'>gradio deploy --title echo-chatbot --app-file app.py\n</code></pre></div>\n\n<p>This command will ask you some questions, e.g. requested hardware, requirements, but the default values will suffice for this guide.\nNote the URL of the space that was created. Mine is https://huggingface.co/spaces/freddyaboulton/echo-chatbot</p>\n\n<h3 id=\"step-3-creating-a-discord-bot\">Step 3: Creating a Discord Bot</h3>\n\n<p>Turning our space into a discord bot is also a one-liner thanks to the <code>gradio deploy-discord</code>. Run the following command:</p>\n\n<div class='codeblock'><pre><code class='lang-bash'>gradio deploy-discord --src freddyaboulton/echo-chatbot\n</code></pre></div>\n\n<p>\u2757\ufe0f Advanced \u2757\ufe0f: If you already have a discord bot token you can pass it to the <code>deploy-discord</code> command. Don't worry, if you don't have one yet!</p>\n\n<div class='codeblock'><pre><code class='lang-bash'>gradio deploy-discord --src freddyaboulton/echo-chatbot --discord-bot-token <token>\n</code></pre></div>\n\n<p>Note the URL that gets printed out to the console. Mine is https://huggingface.co/spaces/freddyaboulton/echo-chatbot-gradio-discord-bot</p>\n\n<h3 id=\"step-4-getting-a-discord-bot-token\">Step 4: Getting a Discord Bot Token</h3>\n\n<p>If you didn't have a discord bot token for step 3, go to the URL that got printed in the console and follow the instructions there.\nOnce you obtain a token, run the command again but this time pass in the token: </p>\n\n<div class='codeblock'><pre><code class='lang-bash'>gradio deploy-discord --src freddyaboulton/echo-chatbot --discord-bot-token <token>\n</code></pre></div>\n\n<h3 id=\"step-5-add-the-bot-to-your-server\">Step 5: Add the bot to your server</h3>\n\n<p>Visit the space of your discord bot. You should see \"Add this bot to your server by clicking this link:\" followed by a URL. Go to that URL and add the bot to your server!</p>\n\n<h3 id=\"step-6-use-your-bot\">Step 6: Use your bot!</h3>\n\n<p>By default the bot can be called by starting a message with <code>/chat</code>, e.g. <code>/chat &lt;your prompt here&gt;</code>.</p>\n\n<p>\u26a0\ufe0f Tip \u26a0\ufe0f: If either of the deployed spaces goes to sleep, the bot will stop working. By default, spaces go to sleep after 48 hours of inactivity. You can upgrade the hardware of your space to prevent it from going to sleep. See this <a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/docs/hub/spaces-gpus#using-gpu-spaces\">guide</a> for more information.</p>\n\n<p><img src=\"https://gradio-builds.s3.amazonaws.com/demo-files/discordbots/guide/echo_slash.gif\"></p>\n\n<h3 id=\"using-the-gradio_clientclient-class\">Using the <code>gradio_client.Client</code> Class</h3>\n\n<p>You can also create a discord bot from a deployed gradio app with python.</p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio_client as grc\ngrc.Client(\"freddyaboulton/echo-chatbot\").deploy_discord()\n</code></pre></div>\n\n<h2 id=\"using-state-of-the-art-llms\">\ud83e\uddbe Using State of The Art LLMs \ud83e\uddbe</h2>\n\n<p>We have created an organization on Hugging Face called <a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/gradio-discord-bots\">gradio-discord-bots</a> containing several template spaces that explain how to deploy state of the art LLMs powered by gradio as discord bots.</p>\n\n<p>The easiest way to get started is by deploying Meta's Llama 2 LLM with 70 billion parameter. Simply go to this <a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/spaces/gradio-discord-bots/Llama-2-70b-chat-hf\">space</a> and follow the instructions. </p>\n\n<p>The deployment can be done in one line! \ud83e\udd2f</p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio_client as grc\ngrc.Client(\"ysharma/Explore_llamav2_with_TGI\").deploy_discord(to_id=\"llama2-70b-discord-bot\")\n</code></pre></div>\n\n<h2 id=\"additional-llms\">\ud83e\udd9c Additional LLMs \ud83e\udd9c</h2>\n\n<p>In addion to Meta's 70 billion Llama 2 model, we have prepared template spaces for the following LLMs and deployment options:</p>\n\n<ul>\n<li><a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/spaces/gradio-discord-bots/gpt-35-turbo\">gpt-3.5-turbo</a>, powered by openai. Required OpenAI key.</li>\n<li><a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/spaces/gradio-discord-bots/falcon-7b-instruct\">falcon-7b-instruct</a> powered by Hugging Face Inference Endpoints.</li>\n<li><a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/spaces/gradio-discord-bots/Llama-2-13b-chat-hf\">Llama-2-13b-chat-hf</a> powered by Hugging Face Inference Endpoints.</li>\n<li><a rel=\"noopener\" target=\"_blank\" href=\"https://huggingface.co/spaces/gradio-discord-bots/llama-2-13b-chat-transformers\">Llama-2-13b-chat-hf</a> powered by Hugging Face transformers.</li>\n</ul>\n\n<p>To deploy any of these models to discord, simply follow the instructions in the linked space for that model.</p>\n\n<h2 id=\"deploying-non-chat-gradio-apps-to-discord\">Deploying non-chat gradio apps to discord</h2>\n\n<p>As mentioned above, you don't need a <code>gr.ChatInterface</code> if you want to deploy your gradio app to discord. All that's needed is an api route that takes in a single string and outputs a single string. </p>\n\n<p>The following code will deploy a space that translates english to german as a discord bot.</p>\n\n<div class='codeblock'><pre><code class='lang-python'>import gradio_client as grc\nclient = grc.Client(\"freddyaboulton/english-to-german\")\nclient.deploy_discord(api_names=['german'])\n</code></pre></div>\n\n<h2 id=\"conclusion\">Conclusion</h2>\n\n<p>That's it for this guide! We're really excited about this feature. Tag <a rel=\"noopener\" target=\"_blank\" href=\"https://twitter.com/Gradio\">@Gradio</a> on twitter and show us how your discord community interacts with your discord bots. </p>\n", "tags": ["NLP", "TEXT", "CHAT"], "spaces": [], "url": "/guides/creating-a-discord-bot-from-a-gradio-app/", "contributor": null}}