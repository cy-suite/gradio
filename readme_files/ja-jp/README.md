<!-- DO NOT EDIT THIS FILE DIRECTLY. INSTEAD EDIT THE `readme_template.md` OR `guides/1)getting_started/1)quickstart.md` TEMPLATES AND THEN RUN `render_readme.py` SCRIPT. -->

<div align="center">

[<img src="../gradio.svg" alt="gradio" width=300>](https://gradio.app)<br>
<em>楽しい機械学習アプリを簡単にビルド＆共有</em>

[![gradio-backend](https://github.com/gradio-app/gradio/actions/workflows/backend.yml/badge.svg)](https://github.com/gradio-app/gradio/actions/workflows/backend.yml)
[![gradio-ui](https://github.com/gradio-app/gradio/actions/workflows/ui.yml/badge.svg)](https://github.com/gradio-app/gradio/actions/workflows/ui.yml)
 [![PyPI](https://img.shields.io/pypi/v/gradio)](https://pypi.org/project/gradio/)
[![PyPI downloads](https://img.shields.io/pypi/dm/gradio)](https://pypi.org/project/gradio/)
![Python version](https://img.shields.io/badge/python-3.8+-important)
[![Twitter follow](https://img.shields.io/twitter/follow/gradio?style=social&label=follow)](https://twitter.com/gradio)

[Web サイト](https://gradio.app)
| [ドキュメント](https://gradio.app/docs/)
| [ガイド](https://gradio.app/guides/)
| [はじめに](https://gradio.app/getting_started/)
| [デモ](../../demo/)
| [English](https://github.com/gradio-app/gradio#readme)
| [中文](../zh-cn/readme.md#readme)

</div>

# Gradio: Python で機械学習 Web アプリケーションを構築する

Gradio はオープンソースの Python ライブラリであり、機械学習やデータサイエンスのデモやウェブアプリケーションをビルドするために使われます。

Gradio を使えば、機械学習モデルやデータサイエンスワークフローの周りに美しいユーザーインターフェイスを素早く作成し、自分の画像をドラッグアンドドロップしたり、テキストを貼り付けたり、自分の声を録音したり、
あなたのデモと対話したりすることで、人々に"試して"もらうことができます。

![Interface montage](../header-image.jpg)

Gradio は次のような用途に役立ちます:

- **デモ** 顧客/共同研究者/ユーザー/学生のための機械学習モデル。

- **デプロイ** 自動で共有可能なリンクを使用してモデルをすばやく作成し、モデルのパフォーマンスに関するフィードバックを得ることができます。

- **デバッグ** 組み込みの操作および解釈ツールを使用して、開発中にモデルをインタラクティブに操作できます。

## クイックスタート

**必須条件**: Gradio には Python 3.8 以上だけが必要です！

### Gradio は何をするのか？

あなたの機械学習モデル、API、またはデータ・サイエンスのワークフローを他の人と _共有するベストな方法_ の 1 つは、あなたのユーザーや同僚がブラウザでデモを試すことができる**対話型アプリ**を作成することです。

Gradio を使えば、**デモを作成し、それを共有することができます。**しかも、通常はほんの数行のコードで！では始めましょう。

### Hello, World

単純な "Hello, World" の例で Gradio を動かすには、以下の 3 つのステップに従います:

1\. pip を使って Gradio をインストールする:

```bash
pip install gradio
```

2\. 以下のコードを Python スクリプトとして、または Jupyter Notebook（または [Google Colab](https://colab.research.google.com/drive/18ODkJvyxHutTN0P5APWyGFO_xwNcgHDZ?usp=sharing)）で実行してください:

```python
import gradio as gr

def greet(name):
    return "Hello " + name + "!"

demo = gr.Interface(fn=greet, inputs="text", outputs="text")

demo.launch()
```

Gradio を使ったコードを読みやすくするために、インポートされた名前を `gr` と短くします。これは広く採用されている慣例で、あなたのコードで作業している人が簡単に理解できるようこちらに従うべきです。

3\. 以下のデモは Jupyter Notebook 内に自動的に表示され、スクリプトから実行している場合は [http://localhost:7860](http://localhost:7860) のブラウザにポップアップ表示されます:

![`hello_world` demo](../../demo/hello_world/screenshot.gif)

ローカルで開発する場合、Python スクリプトとしてコードを実行したい場合は、Gradio CLI を使用してアプリケーションを**リロードモード**で起動することができ、シームレスで高速な開発を提供します。リロードについては[オートリロードガイド](https://gradio.app/developing-faster-with-reload-mode/)を参照してください。

```bash
gradio app.py
```

注: `python app.py` を使うこともできますが、その場合は自動リロードの仕組みは使えません。

### `Interface` クラス

このデモを作るために、`gr.Interface` を作りました。この `Interface` クラスは Python の関数をユーザーインターフェースでラップすることができます。上記の例では、シンプルなテキストベースの関数を見ましたたが、その関数は、音楽ジェネレーターから税金計算機、事前学習された機械学習モデルの予測関数まで何にでもなれます。

コアとなる `Interface` クラスは、3 つの必須パラメータで初期化されます:

- `fn`: UI をラップする関数
- `inputs`: どのコンポーネントを入力に使うか (例 `"text"`、`"image"` または `"audio"`)
- `outputs`: どのコンポーネントを出力に使うか (例 `"text"`、`"image"` または `"label"`)

入力と出力に使われるこれらのコンポーネントを詳しく見てみましょう。

### コンポーネント属性

これまでの例で、シンプルな `Textbox` コンポーネントをいくつか見てきたが、UI コンポーネントの見た目や動作を変更したい場合はどうすればいいのだろうか？

例えば、入力のテキストフィールドをもっと大きくしたり、テキストプレースホルダーをつけたりしてカスタマイズしたいとしましょう。文字列のショートカットを使用する代わりに `Textbox` の実際のクラスを使用すると、コンポーネント属性を通じてより多くのカスタマイズが可能になります。

```python
import gradio as gr

def greet(name):
    return "Hello " + name + "!"

demo = gr.Interface(
    fn=greet,
    inputs=gr.Textbox(lines=2, placeholder="Name Here..."),
    outputs="text",
)
demo.launch()
```

![`hello_world_2` demo](../../demo/hello_world_2/screenshot.gif)

### 複数の入出力コンポーネント

複数の入力と出力を持つ、より複雑な関数があったとしよう。以下の例では、文字列、ブーリアン、数値を受け取り、文字列と数値を返す関数を定義している。入出力コンポーネントのリストを渡す方法を見てみましょう。

```python
import gradio as gr

def greet(name, is_morning, temperature):
    salutation = "Good morning" if is_morning else "Good evening"
    greeting = f"{salutation} {name}. It is {temperature} degrees today"
    celsius = (temperature - 32) * 5 / 9
    return greeting, round(celsius, 2)

demo = gr.Interface(
    fn=greet,
    inputs=["text", "checkbox", gr.Slider(0, 100)],
    outputs=["text", "number"],
)
demo.launch()
```

![`hello_world_3` demo](../../demo/hello_world_3/screenshot.gif)

単にコンポーネントをリストで囲むだけである。`inputs` リストの各コンポーネントは、関数のパラメータのいずれかに順番に対応する。`outputs` リストの各コンポーネントは、関数が返す値のいずれかに対応します。

### イメージの例

Gradio は `Image`、`DataFrame`、`Video`、`Label` など、多くの種類のコンポーネントをサポートしています。image-to-image を試してみましょう！

```python
import numpy as np
import gradio as gr

def sepia(input_img):
    sepia_filter = np.array([
        [0.393, 0.769, 0.189],
        [0.349, 0.686, 0.168],
        [0.272, 0.534, 0.131]
    ])
    sepia_img = input_img.dot(sepia_filter.T)
    sepia_img /= sepia_img.max()
    return sepia_img

demo = gr.Interface(sepia, gr.Image(shape=(200, 200)), "image")
demo.launch()
```

![`sepia_filter` demo](../../demo/sepia_filter/screenshot.gif)

入力として `Image` コンポーネントを使用する場合、関数は `(height, width, 3)` 形式の NumPy 配列を受け取ります。画像も NumPy の配列の形で返します。

また、`type=` キーワード引数でコンポーネントが使用するデータ型を設定することもできます。例えば、NumPy の配列の代わりに画像のファイルパスを受け取る関数にしたい場合、入力の `Image` コンポーネントは次のように書くことができます:

```python
gr.Image(type="filepath", shape=...)
```

また、入力の `Image` コンポーネントには編集ボタン 🖉 が付いており、画像のトリミングやズームが可能です。このように画像を操作することで、機械学習モデルの偏りや隠れた欠陥を明らかにすることができます！

多くのコンポーネントとその使用方法については、[Gradio ドキュメント](https://gradio.app/docs)をご覧ください。

### チャットボット

Gradio には `gr.ChatInterface` という高レベルのクラスがあり、これは `gr.Interface` に似ているが、チャットボットの UI 用に特別に設計されている。`gr.ChatInterface` クラスも関数をラップしていますが、この関数は特定のシグネチャを持たなければなりません。この関数は 2 つの引数を取る： メッセージ `message` と `history` の 2 つの引数を取る必要がある（引数の名前は何でも良いが、この順番でなければならない）

- `message`: ユーザーの入力を表す `str`
- `history`: その時点までの会話を表す `list` の `list` である。各内部リストは `[user input, bot response]` というペアを表す 2 つの `str` から構成される。

あなたの関数は、特定のユーザー入力 `message` に対するボットの応答である単一の文字列応答を返す必要があります。

それ以外には、`gr.ChatInterface` には必須のパラメータはありません（ただし、UI のカスタマイズのためにいくつかのパラメータが用意されています）。

これはおもちゃの例です:

```python
import random
import gradio as gr

def random_response(message, history):
    return random.choice(["Yes", "No"])

demo = gr.ChatInterface(random_response)

demo.launch()
```

![`chatinterface_random_response` demo](../../demo/chatinterface_random_response/screenshot.gif)

[`gr.ChatInterface` についてはこちら](https://gradio.app/guides/creating-a-chatbot-fast)を参照してください。

### Blocks: より高い柔軟性とコントロール

Gradio は、アプリを構築するために2つのアプローチを提供しています:

1\. **Interface** と **ChatInterface** は、これまで説明してきたデモを作成するための高レベルの抽象化を提供する。

2\. **Blocks**、より柔軟なレイアウトとデータフローでウェブアプリを設計するための低レベル API。ブロックを使うことで、複数のデータフローやデモをフィーチャーしたり、ページ上のコンポーネントの表示位置をコントロールしたり、複雑なデータフローを処理したり（例えば、出力が他の関数への入力として機能する）、ユーザーとのインタラクションに基づいてコンポーネントのプロパティや可視性を更新したりといったことが、すべて Python で可能になります。このカスタマイズ性が必要なら、代わりに `Blocks` を使ってみてほしい！

### Hello, Blocks

簡単な例を見てみましょう。ここでの API が `Interface` とどのように異なるかに注目してほしい。

```python
import gradio as gr

def greet(name):
    return "Hello " + name + "!"

with gr.Blocks() as demo:
    name = gr.Textbox(label="Name")
    output = gr.Textbox(label="Output Box")
    greet_btn = gr.Button("Greet")
    greet_btn.click(fn=greet, inputs=name, outputs=output, api_name="greet")


demo.launch()
```

![`hello_blocks` demo](../../demo/hello_blocks/screenshot.gif)

注意点:

- `Blocks` は　`with`　節で作られ、この節の中で作られたコンポーネントは自動的にアプリに追加されます。
- コンポーネントは、作成された順にアプリ内で縦に表示されます。（後でレイアウトのカスタマイズについて説明します！）
- `Button` が作成され、`click` イベントリスナーがこのボタンに追加されました。この API は見慣れているでしょう！インターフェースのように、`click` メソッドは Python の関数、入力コンポーネント、出力コンポーネントを受け取ります。

### もっと複雑に

`Blocks` でどんなことができるかを体験してもらうためのアプリを紹介します：

```python
import numpy as np
import gradio as gr


def flip_text(x):
    return x[::-1]


def flip_image(x):
    return np.fliplr(x)


with gr.Blocks() as demo:
    gr.Markdown("Flip text or image files using this demo.")
    with gr.Tab("Flip Text"):
        text_input = gr.Textbox()
        text_output = gr.Textbox()
        text_button = gr.Button("Flip")
    with gr.Tab("Flip Image"):
        with gr.Row():
            image_input = gr.Image()
            image_output = gr.Image()
        image_button = gr.Button("Flip")

    with gr.Accordion("Open for More!"):
        gr.Markdown("Look at me...")

    text_button.click(flip_text, inputs=text_input, outputs=text_output)
    image_button.click(flip_image, inputs=image_input, outputs=image_output)

demo.launch()
```

![`blocks_flipper` demo](../../demo/blocks_flipper/screenshot.gif)

他にもいろいろあります！このような複雑な `Blocks` アプリを作る方法は、[blocks で作る](https://gradio.app/building_with_blocks)のセクションで紹介します。

おめでとう、これで Gradio の基本を理解したことになります！ 🥳 Gradio の主な機能については、[次のガイド](https://gradio.app/key_features)をご覧ください。

## オープンソーススタック

Gradio は多くの素晴らしいオープンソースライブラリで構築されています！

[<img src="../huggingface_mini.svg" alt="huggingface" height=40>](https://huggingface.co)
[<img src="../python.svg" alt="python" height=40>](https://www.python.org)
[<img src="../fastapi.svg" alt="fastapi" height=40>](https://fastapi.tiangolo.com)
[<img src="../encode.svg" alt="encode" height=40>](https://www.encode.io)
[<img src="../svelte.svg" alt="svelte" height=40>](https://svelte.dev)
[<img src="../vite.svg" alt="vite" height=40>](https://vitejs.dev)
[<img src="../pnpm.svg" alt="pnpm" height=40>](https://pnpm.io)
[<img src="../tailwind.svg" alt="tailwind" height=40>](https://tailwindcss.com)
[<img src="../storybook.svg" alt="storybook" height=40>](https://storybook.js.org/)
[<img src="../chromatic.svg" alt="chromatic" height=40>](https://www.chromatic.com/)

## ライセンス

Gradio は、このリポジトリのルートディレクトリの [LICENSE](LICENSE) ファイルにある Apache License 2.0 でライセンスされています。

## 引用

また、論文 _[Gradio: Hassle-Free Sharing and Testing of ML Models in the Wild](https://arxiv.org/abs/1906.02569), ICML HILL 2019_ もチェックしてください。もし Gradio を仕事に使う場合は引用してください。

```
@article{abid2019gradio,
  title = {Gradio: Hassle-Free Sharing and Testing of ML Models in the Wild},
  author = {Abid, Abubakar and Abdalla, Ali and Abid, Ali and Khan, Dawood and Alfozan, Abdulrahman and Zou, James},
  journal = {arXiv preprint arXiv:1906.02569},
  year = {2019},
}
```
